---
title: 类型转换
---
import Table from "@site/src/components/Table/index";

JavaScript 的类型转换
<Table
  data={{
    position: ["center","center","center","center"],
    header: ["值", "转换为字符串", "转换为数值", "转换为布尔值"],
    body: [
      ["undefined", '"undefined"', `NaN`, `false`],
      ["null", '"null"', `0`, `false`],
      ["true", '"true"', `1`],
      ["false", '"“false”"', `0`],
      ['""（空字符串）', null, `0`, "false"],
      ['"1.2"（非空，数值）', null, `1.2`, "true"],
      ['"one"（非空，非数值）', null, `NaN`, "true"],
      ["0", '"0"', null, "false"],
      ["-0", '"0"', null, "false"],
      ["1（有限，非零）", '"1"', null, "true"],
      ["Infinity", '"Infinity"', null, "true"],
      ["-Infinity", '"-Infinity"', null, "true"],
      ["NaN", '"NaN"', null, "false"],
      ["{ }（任何对象）", null, null, "true"],
      ["[ ]（空数组）", '""', 0, "true"],
      ["[9]（一个数值元素）", '"9"', 9, "true"],
      ["['a']（任何其他数组）", "使用 join()方法", "NaN", "true"],
      ["Function( )[ ] ", null, "NaN", "true"],
    ],
  }}
/>


### **显示转换**

- `Boolean()`
- `Number()`
- `String()`

除 `null` 和 `undefined` 之外的所有值都有 `toString()` 方法，返回的结果通常与 `String()` 相同

某些 JavaScript 操作符会执行隐式类型转换

```js
x + ""				// => String(x)
+x				// => Number(x)
x-0				// => Number(x)
!!x				// => Boolean(x)：注意这里两次取反
```



### 数值到字符串

Number 类定义的  `toString()` 方法可以接收一个参数（ 2~36 ），用于指定一个基数或底数，默认为 10

```js
let n =17;
let binary = "0b" + n.toString(2);		// binary == "0b10001"
let octal = "0o" + n.toString(8);		// binary == "0o21"
let hex = "0x" + n.toString(16);		// hex == "0x11"
```

Number 类定义了 3 种方法

- `toFixed()` ：转换时可以指定小数点后面位数
- `toExponential()` ：使用指数计数法转换，结果为小数点前 1 位，小数点后为指定位数
- `toPrecision()` ：按照指定的有效数字转换，若有效数字个数不足以表示数值的整数部分，使用指数计数法
- 三种方法必要时都会舍去末尾的数字或补 0

```js
let n = 123456.789;
n.toFixed(0)						// => "123457"
n.toFixed(5)						// => "123456.79"
n.toExponential(1)					// => "1.2e+5"
n.toExponential(3)					// => "1.235e+5"
n.toPrecision(4)					// => "1.235e+5"
n.toPrecision(7)					// => "123456.8"
n.toPrecision(10)					// => "123456.7890"
```



### 字符串到数值

把字符串传给 `Number()` 转换函数，会把字符串当成整数或浮点数字面量解析，只支持基础为 10 的整数，不允许末尾出现无关字符

`parseInt()` 只解析整数，接收可选的第二个参数，用于指定要解析数值的基数或底数（ 2~36 ）

`parseFloat()` 既解析整数也解析浮点数

`parseInt()` 和 `parseFloat()` 会跳过开头空格，尽量解析多的数字，忽略后面的无关字符。若第一个字符不是有效的数值字面量，返回 `NaN` 



### 对象到原始值

所有对象都会继承两个在对象到原始值转换时使用的方法

- `toString()`：返回对象的字符串表示
- `valueOf()`：把对象转换为代表对象的原始值（若存在一个这样的原始值）



JavaScript 规范定义了对象到原始值转换的 3 种基本算法

- 偏字符串：该算法返回原始值，而且只要可能就返回字符串

  > 偏字符串算法首先尝试 `toString()` 方法，若此方法有定义且返回原始值，则使用该原始值；若不存在，或存在但返回对象，尝试 `valueOf()` 方法，若此方法存在且返回原始值，则使用该原始值，否则，报 `TypeError()`

- 偏数值：该算法返回原始值，而且只要可能就返回数值

  > 与偏字符串算法类似，但是先尝试 `valueOf()` 方法，再尝试 `toString()` 方法

- 无偏好：该算法不倾向于任何原始值类型，由类定义自己的转换规则

  > 取决于被转换对象的类

JavaScript 内置类除了 `Date()` 类都实现了偏数值算法，`Date()` 类实现偏字符串算法